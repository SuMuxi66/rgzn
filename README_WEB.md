# 医疗AI网页聊天应用

一个功能完整的医疗AI聊天网页应用，集成Dify医疗AI API，支持语音输入、文字输入、文件上传和语音回答。

## 🌟 主要功能

### 🗣️ 语音交互
- **语音输入**：点击麦克风按钮进行语音识别，支持中文语音转文字
- **语音回答**：AI回答可自动语音播报，支持开关控制
- **录音状态**：实时显示录音状态和语音识别结果

### 💬 文字交互
- **文字输入**：支持键盘输入和Enter键快速发送
- **富文本显示**：支持基本的Markdown格式化显示
- **实时流式响应**：AI回答实时逐字显示（打字机效果）

### 📁 文件处理
- **多文件上传**：支持PDF、DOCX、PNG、JPG、TXT等医学文件
- **文件管理**：已上传文件列表显示和移除功能
- **文件分析**：结合文件内容进行智能问答

### 🎨 用户界面
- **响应式设计**：支持桌面和移动设备
- **现代化UI**：渐变色彩和圆角设计
- **实时状态**：底部状态栏显示操作状态

## 🚀 快速开始

### 1. 配置API
在网页右侧设置面板中配置：
- **API地址**：`http://192.168.1.127/v1`
- **API密钥**：你的Dify医疗AI API密钥
- **用户ID**：自定义用户标识

### 2. 使用方式
1. **文字对话**：在输入框中输入问题，点击"发送"按钮
2. **语音输入**：点击"🎤 语音输入"按钮开始录音
3. **文件上传**：点击"📁 上传文件"按钮选择文件
4. **语音开关**：切换右侧"语音回答"开关控制语音播报

### 3. 交互示例
```
用户：我肚子右下腹疼痛是什么原因？
AI：根据您的症状描述，可能是急性阑尾炎...

用户：上传病历.pdf
用户：请分析这份病历的主要问题
AI：根据病历分析，患者主要症状为...

用户：需要做哪些检查？
AI：建议进行血常规、超声检查等...
```

## 🛠️ 技术特性

### 前端技术栈
- **纯HTML/CSS/JavaScript**：无需额外依赖
- **Web Speech API**：浏览器原生语音识别和合成
- **Fetch API**：现代化HTTP请求处理
- **Stream API**：流式响应处理

### 功能模块
- **MedicalAIChat类**：核心聊天应用类
- **语音识别模块**：实时语音转文字
- **语音合成模块**：文字转语音播报
- **文件上传模块**：医学文件处理
- **流式响应模块**：实时消息显示

### 浏览器兼容性
- **Chrome**：完全支持（推荐）
- **Edge**：完全支持
- **Firefox**：部分功能支持
- **Safari**：部分功能支持

## 🔧 使用说明

### 语音功能
1. **语音输入**：
   - 点击麦克风按钮开始录音
   - 说话结束后自动停止识别
   - 识别结果自动填入输入框

2. **语音回答**：
   - 开启右侧语音开关即可自动播报
   - 可随时关闭语音功能
   - 支持语音播报暂停/继续

### 文件功能
1. **上传文件**：
   - 支持多文件同时选择
   - 显示上传进度和结果
   - 已上传文件在侧边栏显示

2. **文件管理**：
   - 可随时移除已上传文件
   - 每次对话后自动清空文件列表
   - 支持文件类型预览

### 对话功能
1. **连续对话**：
   - 自动保持会话上下文
   - 支持多轮问答
   - 显示正在输入状态

2. **消息显示**：
   - 用户消息右侧显示
   - AI消息左侧显示
   - 支持富文本格式

## ⚠️ 注意事项

### 浏览器要求
- 需要现代浏览器（推荐Chrome最新版）
- 需要允许麦克风访问权限
- 需要允许语音播放权限

### 网络要求
- 需要访问Dify API服务器
- 建议稳定的网络连接
- 文件上传需要足够带宽

### 安全说明
- API密钥仅在本地浏览器中使用
- 不会上传到任何第三方服务器
- 建议在安全网络环境下使用

## 📱 移动端适配

### 响应式布局
- 自动适配手机和平板屏幕
- 触摸友好的按钮设计
- 优化的输入体验

### 移动特性
- 支持手机录音功能
- 支持横竖屏切换
- 优化的滚动体验

## 🎯 应用场景

### 医疗咨询
- 腹部疼痛初步诊断
- 症状分析和建议
- 检查项目推荐

### 病历分析
- 医学文件智能解读
- 症状关联分析
- 治疗方案建议

### 健康管理
- 日常健康咨询
- 预防保健建议
- 就医指导

## 🆘 常见问题

### Q: 语音识别不工作？
A: 请检查浏览器是否支持Web Speech API，并允许麦克风权限

### Q: 文件上传失败？
A: 检查文件格式是否支持，网络连接是否正常

### Q: 语音回答没有声音？
A: 检查系统音量设置，浏览器是否支持语音合成

### Q: API连接失败？
A: 检查API地址和密钥是否正确，网络是否可访问

## 📄 文件结构

```
medical_ai_chat.html    # 主网页文件（包含所有代码）
README_WEB.md          # 使用说明文档
```

## 🚀 部署方式

### 本地使用
1. 直接用浏览器打开 `medical_ai_chat.html`
2. 配置API参数
3. 开始使用

### 服务器部署
1. 将文件上传到Web服务器
2. 通过HTTP访问
3. 支持HTTPS部署

## 🔒 安全建议

1. **API密钥保护**：
   - 不要在公共场合展示密钥
   - 定期更换密钥
   - 限制API调用频率

2. **网络安全**：
   - 使用HTTPS协议
   - 部署在安全网络环境
   - 定期更新浏览器

3. **隐私保护**：
   - 医学数据仅在本地处理
   - 不存储用户对话记录
   - 支持隐私模式使用

## 📞 技术支持

如遇到使用问题，请检查：
1. 浏览器兼容性
2. 网络连接状态
3. API配置正确性
4. 权限设置

## 📝 版本信息

- **版本**：1.0.0
- **更新日期**：2025-10-31
- **支持API**：Dify医疗AI v1.9.2

---
*专为医疗AI应用设计，提供专业、安全、便捷的医疗咨询服务*
